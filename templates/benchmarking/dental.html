{% extends base_template %}
{% block page_content %}

{% if num_employers >= EMPLOYER_THRESHOLD %}

    <div class="card section">
        <div class="row">
            <div class="col-md-6 section-content-left">
                <div class="col-md-9">
                <table class="table table-striped table-content">
                    <col width="60%">
                    <col width="40%">
                    <thead>
                        <tr>
                            <th class="row-label">Plan Type Offering</th>
                            <th>Employers</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">Offer DPPO</td>
                            <td>{{ prcnt_dppo }}</td>
                        </tr>
                        <tr>
                            <td class="row-label">Offer DMO</td>
                            <td>{{ prcnt_dmo }}</td>
                        </tr>
                    </tbody>
                </table> 
                </div>
                <div class="col-md-3">
                    <div id="bar-chart" style="height: 190px;"></div>
                </div>
            </div>
            <div class="col-md-6 section-content-right">
                <div class="col-md-9">
                <table class="table table-striped table-content">
                    <col width="60%">
                    <col width="40%">
                    <thead>
                        <tr>
                            <th class="row-label">Number of Plans Offered</th>
                            <th>Employers</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">No Plans Offered</td>
                            <td>{{ prcnt_plan0 }}%</td>
                        </tr>
                        <tr>
                            <td class="row-label">One Plan Offered</td>
                            <td>{{ prcnt_plan1 }}%</td>
                        </tr>
                        <tr>
                            <td class="row-label">Two Plans Offered</td>
                            <td>{{ prcnt_plan2 }}%</td>
                        </tr>
                        <tr>
                            <td class="row-label">Three or More Plans Offered</td>
                            <td>{{ prcnt_plan3_or_more }}%</td>
                        </tr>
                    </tbody>
                </table> 
                </div>
                <div class="col-md-3">
                    <div id="donut-chart" class="flot-chart-pie" style="height: 190px;"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="card section">
        <div class="row">
            <div class="col-md-5 section-content">
                <table class="table table-striped table-content">
                    <col width="50%">
                    <col width="25%">
                    <col width="25%">
                    <thead>
                        <tr>
                            <th class="row-label">Deductibles</th>
                            <th>Benchmark</th>
                            <th class="toggle_plan">Your Plan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">In Network Individual Deductible</td>
                            <td>{{ mdn_in_ded_single }}</td>
                            <td><span id="prop_in_ded_single"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">In Network Family Deductible</td>
                            <td>{{ mdn_in_ded_family }}</td>
                            <td><span id="prop_in_ded_family"></span></td>
                        </tr>
                        <tr class="out-benefit">
                            <td class="row-label">Out of Network Individual Deductible</td>
                            <td>{{ mdn_out_ded_single }}</td>
                            <td><span id="prop_out_ded_single"></span></td>
                        </tr>
                        <tr class="out-benefit">
                            <td class="row-label">Out of Network Family Deductible</td>
                            <td>{{ mdn_out_ded_family }}</td>
                            <td><span id="prop_out_ded_family"></span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-6 section-graph">
                <div id="DENTAL-1" class="flot-chart"></div>
            </div>
            <div class="col-md-1 text-center section-score">
                <h5 class="toggle_plan">Q-SCORE</h5>
                <p><span id="prop_rank_in_ded_single"></span></p>           
            </div> 
        </div>
    </div>

    <div class="card section">
        <div class="row">
            <div class="col-md-5 section-content">
                <table class="table table-striped table-content">
                    <col width="50%">
                    <col width="25%">
                    <col width="25%">
                    <thead>
                        <tr>
                            <th class="row-label">Benefit Maximums</th>
                            <th>Benchmark</th>
                            <th class="toggle_plan">Your Plan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">In Network Benefit Maximum</td>
                            <td>{{ mdn_in_max }}</td>
                            <td><span id="prop_in_max"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">In Network Orthodontia Maximum</td>
                            <td>{{ mdn_in_max_ortho }}</td>
                            <td><span id="prop_in_max_ortho"></span></td>
                        </tr>
                        <tr class="out-benefit">
                            <td class="row-label">Out of Network Benefit Maximum</td>
                            <td>{{ mdn_out_max }}</td>
                            <td><span id="prop_out_max"></span></td>
                        </tr>
                        <tr class="out-benefit">
                            <td class="row-label">Out of Network Orthodontia Maximum</td>
                            <td>{{ mdn_out_max_ortho }}</td>
                            <td><span id="prop_out_max_ortho"></span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-6 section-graph">
                <div id="DENTAL-3" class="flot-chart"></div>
            </div>
            <div class="col-md-1 text-center section-score">
                <h5 class="toggle_plan">Q-SCORE</h5>
                <p><span id="prop_rank_in_max"></span></p>           
            </div> 
        </div>
    </div>

    <div class="card section">
        <div class="row">
            <div class="col-md-5 section-content">
                <table class="table table-striped table-content">
                    <col width="50%">
                    <col width="25%">
                    <col width="25%">
                    <thead>
                        <tr>
                            <th class="row-label">Orthodontia Coverage</th>
                            <th>Benchmark</th>
                            <th class="toggle_plan">Your Plan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">In-Network Ortho (Class IV) Coinsurance</td>
                            <td>{{ mdn_in_ortho_coin }}</td>
                            <td><span id="prop_in_ortho_coin"></span></td>
                        </tr>
                        <tr class="out-benefit">
                            <td class="row-label">Out-of-Network Ortho (Class IV) Coinsurance</td>
                            <td>{{ mdn_out_ortho_coin }}</td>
                            <td><span id="prop_out_ortho_coin"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Deductible Applies to Orthodontia Care</td>
                            <td>{{ prcnt_ortho_ded_apply }}</td>
                            <td><span id="prop_ortho_ded_apply"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Age Limit</td>
                            <td>{{ mdn_ortho_age_limit }}</td>
                            <td><span id="prop_ortho_age_limit"></span></td>
                        </tr>
                    </tbody>
                </table>
            </div> 

            <div class="col-md-7 section-graph">
                <div id="pie-charts" class="dash-widget-item">
                    <div class="bgm-teal">
                        <div class="dash-widget-header">
                            <div class="dash-widget-title">Orthodontia</div>
                        </div>
                        
                        <div class="clearfix"></div>
                        
                        <div class="row">
                            <div class="col-md-4 col-md-offset-2">
                                <div class="text-center p-20">
                                    <div class="easy-pie main-pie" data-percent="{{ pprcnt_ortho_ded_apply }}">
                                        <div class="percent">{{ pprcnt_ortho_ded_apply|cut:"%" }}</div>
                                        <div class="pie-title p-b-10">Offer Orthodontia Coverage</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="text-center p-20">
                                    <div class="easy-pie main-pie" data-percent="{{ pprcnt_ortho_age_limit }}">
                                        <div class="percent">{{ pprcnt_ortho_age_limit|cut:"%" }}</div>
                                        <div class="pie-title p-b-10">Require Age Limit</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>            
                </div>
            </div>
        </div>
    </div>

    <div class="card section">
        <div class="row">
            <div class="col-md-5 section-content">
                <table class="table table-striped table-content">
                    <col width="50%">
                    <col width="25%">
                    <col width="25%">
                    <thead>
                        <tr>
                            <th class="row-label">Employee Annual Contributions</th>
                            <th>Benchmark</th>
                            <th class="toggle_plan">Your Plan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">Employee Only</td>
                            <td>{{ mdn_t1_ee }}</td>
                            <td><span id="prop_t1_ee"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Employee & Spouse</td>
                            <td>{{ mdn_t2_ee }}</td>
                            <td><span id="prop_t2_ee"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Employee & Children</td>
                            <td>{{ mdn_t3_ee }}</td>
                            <td><span id="prop_t3_ee"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Family</td>
                            <td>{{ mdn_t4_ee }}</td>
                            <td><span id="prop_t4_ee"></span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-6 section-graph">
                <div id="DENTAL-9" class="flot-chart"></div>
            </div>
            <div class="col-md-1 text-center section-score">
                <h5 class="toggle_plan">Q-SCORE</h5>
                <p><span id="prop_rank_t1_ee"></span></p>           
            </div> 
        </div>
    </div> 

    <div class="card section">
        <div class="row">
            <div class="col-md-5 section-content">
                <table class="table table-striped table-content">
                    <col width="50%">
                    <col width="25%">
                    <col width="25%">
                    <thead>
                        <tr>
                            <th class="row-label">Gross Annual Cost</th>
                            <th>Benchmark</th>
                            <th class="toggle_plan">Your Plan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">Employee Only</td>
                            <td>{{ mdn_t1_gross }}</td>
                            <td><span id="prop_t1_gross"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Employee & Spouse</td>
                            <td>{{ mdn_t2_gross }}</td>
                            <td><span id="prop_t2_gross"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Employee & Children</td>
                            <td>{{ mdn_t3_gross }}</td>
                            <td><span id="prop_t3_gross"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Family</td>
                            <td>{{ mdn_t4_gross }}</td>
                            <td><span id="prop_t4_gross"></span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-6 section-graph">
                <div id="DENTAL-10" class="flot-chart"></div>
            </div>
            <div class="col-md-1 text-center section-score">
                <h5 class="toggle_plan">Q-SCORE</h5>
                <p><span id="prop_rank_t1_gross"></span></p>           
            </div> 
        </div>
    </div> 

    <div class="card section">
        <div class="row">
            <div class="col-md-5 section-content">
                <table class="table table-striped table-content">
                    <col width="50%">
                    <col width="25%">
                    <col width="25%">
                    <thead>
                        <tr>
                            <th class="row-label">Dental Services Cost Share</th>
                            <th>Benchmark</th>
                            <th class="toggle_plan">Your Plan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="row-label">Deductible Applies to Preventive Care</td>
                            <td>{{ prcnt_prev_ded_apply }}</td>
                            <td><span id="prop_prev_ded_apply"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Preventive (Class I) Coinsurance</td>
                            <td>{{ mdn_in_prev_coin }}</td>
                            <td><span id="prop_in_prev_coin"></span></td>
                        </tr>
                        <tr class="out-benefit">
                            <td class="row-label">Preventive (Class I) Coinsurance</td>
                            <td>{{ mdn_out_prev_coin }}</td>
                            <td><span id="prop_out_prev_coin"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Deductible Applies to Basic Care</td>
                            <td>{{ prcnt_basic_ded_apply }}</td>
                            <td><span id="prop_basic_ded_apply"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Basic (Class II) Coinsurance</td>
                            <td>{{ mdn_in_basic_coin }}</td>
                            <td><span id="prop_in_basic_coin"></span></td>
                        </tr>
                        <tr class="out-benefit">
                            <td class="row-label">Basic (Class II) Coinsurance</td>
                            <td>{{ mdn_out_basic_coin }}</td>
                            <td><span id="prop_out_basic_coin"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Deductible Applies to Major Care</td>
                            <td>{{ prcnt_major_ded_apply }}</td>
                            <td><span id="prop_major_ded_apply"></span></td>
                        </tr>
                        <tr>
                            <td class="row-label">Major (Class III) Coinsurance</td>
                            <td>{{ mdn_in_major_coin }}</td>
                            <td><span id="prop_in_major_coin"></span></td>
                        </tr>
                        <tr class="out-benefit">
                            <td class="row-label">Major (Class III) Coinsurance</td>
                            <td>{{ mdn_out_major_coin }}</td>
                            <td><span id="prop_out_major_coin"></span></td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div> 

{% else %}
    {% include 'includes/too-few-employers.html' %}
{% endif %}


<script type="text/javascript">

var gh1_data, gh2_data, gh3_data, gh4_data, gh6_data, gh7_data, gh8_data, gh9_data, gh10_data, gh11_data, gh12_data;
var plan_type = '{{ request.session.plan_type }}';

{% if num_employers >= EMPLOYER_THRESHOLD %}
    gh1_data = {{ quintile_in_ded_single }};
    gh3_data = {{ quintile_in_max }};
    gh9_data = {{ quintile_t1_ee }};
    gh10_data = {{ quintile_t1_gross }};
    

    gh11_data = [
        {data: {{ prcnt_plan0 }}, color: '#795548', label: 'No Plans Offered'},
        {data: {{ prcnt_plan1 }}, color: '#9E9E9E', label: 'One Plan Offered'},
        {data: {{ prcnt_plan2 }}, color: '#009688', label: 'Two Plans Offered'},
        {data: {{ prcnt_plan3_or_more }}, color: '#FFC107', label: 'Three or More Plans Offered'},
    ];        

    gh12_data = [{
        data : [['DPPO', {{ prcnt_dppo|cut:'%' }}], ['DMO', {{ prcnt_dmo|cut:'%' }}]],
        bars : {
            show : true,
            barWidth : 0.30,
            order : 1,
            lineWidth: 0,
            fillColor: '#607D8B'
        }
    }];        

    var attribute_map = [
        {
            data: gh1_data,
            placeholder: 'DENTAL-1',
            in_ded_single: 'dollar',
            rx_coin: 'percent',
            inverse: true
        },
        {
            data: gh3_data,
            placeholder: 'DENTAL-3',
            in_max: 'dollar',
            rx_coin: 'percent',
            inverse: false
        },
        {
            data: gh9_data,
            placeholder: 'DENTAL-9',
            t1_ee: 'dollar',
            rx_coin: 'percent',
            inverse: true
        },    
        {
            data: gh10_data,
            placeholder: 'DENTAL-10',
            t1_gross: 'dollar',
            rx_coin: 'percent',
            inverse: true
        },        
    ];  
{% endif %}
</script>
{% endblock %}