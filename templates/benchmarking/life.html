{% extends base_template %}
{% block page_content %}

{% if num_employers >= EMPLOYER_THRESHOLD %}

    <div class="card section">
        <div class="row">
        <div class="col-md-6 section-content-left">
            <div class="col-md-9">
            <table class="table table-striped table-content">
                <col width="60%">
                <col width="40%">
                <thead>
                    <tr>
                        <th class="row-label">Plan Type Offering</th>
                        <th>Employers</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="row-label">Multiple of Salary Plans Only</td>
                        <td>{{ prcnt_type_plan_mul }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">Flat Plans Only</td>
                        <td>{{ prcnt_type_plan_flat }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">Both Multiple & Flat Plans</td>
                        <td>{{ prcnt_type_plan_mul_flat }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">Not Reported</td>
                        <td>{{ prcnt_type_non_reported }}%</td>
                    </tr>
                </tbody>
            </table>  
            </div>
            <div class="col-md-3">
                <div id="bar-chart" style="height: 190px;"></div>
            </div>
        </div>
        <div class="col-md-6 section-content-right">
            <div class="col-md-9">
            <table class="table table-striped table-content">
                <col width="60%">
                <col width="40%">
                <thead>
                    <tr>
                        <th class="row-label">Number of Plans Offered</th>
                        <th>Employers</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="row-label">No Plans Offered</td>
                        <td>{{ prcnt_plan0 }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">One Plan Offered</td>
                        <td>{{ prcnt_plan1 }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">Two Plans Offered</td>
                        <td>{{ prcnt_plan2 }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">Three or More Plans Offered</td>
                        <td>{{ prcnt_plan3_or_more }}%</td>
                    </tr>
                </tbody>
            </table>
            </div>
            <div class="col-md-3">
                <div id="donut-chart" class="flot-chart-pie" style="height: 190px;"></div>
            </div>
        </div>
        </div>
    </div>

    <div class="card section multiple-benefit">
        <div class="row">
        <div class="col-md-5 section-content">
            <table class="table table-striped table-content">
                <col width="50%">
                <col width="25%">
                <col width="25%">
                <thead>
                    <tr>
                        <th class="row-label">Multiple of Salary Plans</th>
                        <th>Benchmark</th>
                        <th class="toggle_plan">Your Plan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="row-label">Maximum Benefit</td>
                        <td>{{ mdn_multiple_max }}</td>
                        <td><span id="prop_multiple_max"></span></td>
                    </tr>
                    <tr>
                        <td class="row-label">Multiple Factor</td>
                        <td>{{ mdn_multiple }}</td>
                        <td><span id="prop_multiple"></span></td>
                    </tr>
                    <tr>
                        <td class="row-label">ADD Included</td>
                        <td>{{ prcnt_add_multiple }}</td>
                        <td><span id="prop_add_multiple"></span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-6 section-graph">
            <div id="LIFE-1" class="flot-chart"></div>
        </div>
        <div class="col-md-1 section-score">
            <h5 class="toggle_plan">Q-SCORE</h5>
            <p><span id="prop_rank_multiple_max"></span></p>           
        </div> 
        </div>
    </div>

    <div class="card section flat-benefit">
        <div class="row">
        <div class="col-md-5 section-content">
            <table class="table table-striped table-content">
                <col width="50%">
                <col width="25%">
                <col width="25%">
                <thead>
                    <tr>
                        <th class="row-label">Flat Amount Plans</th>
                        <th>Benchmark</th>
                        <th class="toggle_plan">Your Plan</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="quintile-subject">
                        <td class="row-label">Flat Benefit *</td>
                        <td>{{ mdn_flat_amount }}</td>
                        <td><span id="prop_flat_amount"></span></td>
                    </tr>
                    <tr>
                        <td class="row-label">ADD Included</td>
                        <td>{{ prcnt_add_flat }}</td>
                        <td><span id="prop_add_flat"></span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-6 section-graph">
            <div id="LIFE-2" class="flot-chart"></div>
        </div> 
        <div class="col-md-1 section-score">
            <h5 class="toggle_plan">Q-SCORE</h5>
            <p><span id="prop_rank_flat_amount"></span></p>      
        </div>
        </div>
    </div>

    <div class="card section">
        <div class="row">
        <div class="col-md-5 section-content">
            <table class="table table-striped table-content">
                <col width="60%">
                <col width="40%">
                <thead>
                    <th class="row-label">Premium Cost Share</th>
                    <th>Employers</th>
                </thead>
                <tbody>
                    <tr>
                        <td class="row-label">100% Employer Paid Only</td>
                        <td>{{ prcnt_paid }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">Employee Cost Share Only</td>
                        <td>{{ prcnt_share }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">Core & Buy Up Plans</td>
                        <td>{{ prcnt_paid_share }}%</td>
                    </tr>
                    <tr>
                        <td class="row-label">Not Reported</td>
                        <td>{{ prcnt_non_reported }}%</td>
                    </tr>
                </tbody>
            </table>  
        </div>
        <div class="col-md-6 section-graph">
                <div id="pie-charts" class="dash-widget-item">
                    <div class="bgm-teal">
                        <div class="dash-widget-header">
                            <div class="dash-widget-title">Rx-Only</div>
                        </div>
                        
                        <div class="clearfix"></div>
                        
                        <div class="row">
                        <div class="col-md-4">
                        <div class="text-center p-20">
                            <div class="easy-pie main-pie LIFE-12" data-percent="{{ prcnt_paid }}">
                                <div class="percent">{{ prcnt_paid }}</div>
                                <div class="pie-title">100% Employer Paid Only</div>
                            </div>
                        </div>
                        </div>
                        <div class="col-md-4">
                        <div class="text-center p-20">
                           <div class="easy-pie main-pie LIFE-13" data-percent="{{ prcnt_share }}">
                                <div class="percent">{{ prcnt_share }}</div>
                                <div class="pie-title">Employee Cost Share Only</div>
                            </div>
                        </div>
                        </div>
                        <div class="col-md-4">
                        <div class="text-center p-20">
                            <div class="easy-pie main-pie LIFE-14" data-percent="{{ prcnt_paid_share }}">
                                <div class="percent">{{ prcnt_paid_share }}</div>
                                <div class="pie-title">Core & Buy Up Plans</div>
                            </div>
                        </div>
                        </div>
                        </div>
                    </div>            
                </div>
        </div>
        </div>
    </div>

{% else %}
    {% include 'includes/too-few-employers.html' %}
{% endif %}

<script type="text/javascript">

var gh1_data, gh2_data, gh3_data, gh4_data;
var plan_type = '{{ request.session.plan_type }}';

{% if num_employers >= EMPLOYER_THRESHOLD %}
    gh1_data = {{ quintile_multiple_max }};
    gh2_data = {{ quintile_flat_amount }};

    gh3_data = [
        {data: {{ prcnt_plan0 }}, color: '#795548', label: 'No Plans Offered'},
        {data: {{ prcnt_plan1 }}, color: '#FFC107', label: 'One Plan Offered'},
        {data: {{ prcnt_plan2 }}, color: '#009688', label: 'Two Plans Offered'},
        {data: {{ prcnt_plan3_or_more }}, color: '#9E9E9E', label: 'Three or More Plans Offered'},
    ];        

    gh4_data = [{
        data : [['Multiple of Salary Only', {{ prcnt_type_plan_mul|cut:'%' }}], ['Flat Amount Only', {{ prcnt_type_plan_flat|cut:'%' }}], ['Both Plans', {{ prcnt_type_plan_mul_flat|cut:'%' }}]],
        bars : {
            show : true,
            barWidth : 0.3,
            order : 1,
            lineWidth: 0,
            fillColor: '#607D8B'
        }
    }]; 

    var attribute_map = [
        {
            data: gh1_data,
            placeholder: 'LIFE-1',
            multiple_max: 'dollar',
            rx_coin: 'percent',
            inverse: false
        },
        {
            data: gh2_data,
            placeholder: 'LIFE-2',
            flat_amount: 'dollar',
            rx_coin: 'percent',
            inverse: false
        },
    ];    
{% endif %}
</script>
{% endblock %}